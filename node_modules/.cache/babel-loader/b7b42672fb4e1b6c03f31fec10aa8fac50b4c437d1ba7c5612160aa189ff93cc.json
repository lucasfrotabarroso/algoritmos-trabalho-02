{"ast":null,"code":"import { argsert } from './argsert.js';\nimport { isPromise } from './utils/is-promise.js';\nexport function globalMiddlewareFactory(globalMiddleware, context) {\n  return function (callback) {\n    let applyBeforeValidation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    argsert('<array|function> [boolean]', [callback, applyBeforeValidation], arguments.length);\n    if (Array.isArray(callback)) {\n      for (let i = 0; i < callback.length; i++) {\n        if (typeof callback[i] !== 'function') {\n          throw Error('middleware must be a function');\n        }\n        callback[i].applyBeforeValidation = applyBeforeValidation;\n      }\n      Array.prototype.push.apply(globalMiddleware, callback);\n    } else if (typeof callback === 'function') {\n      callback.applyBeforeValidation = applyBeforeValidation;\n      globalMiddleware.push(callback);\n    }\n    return context;\n  };\n}\nexport function commandMiddlewareFactory(commandMiddleware) {\n  if (!commandMiddleware) return [];\n  return commandMiddleware.map(middleware => {\n    middleware.applyBeforeValidation = false;\n    return middleware;\n  });\n}\nexport function applyMiddleware(argv, yargs, middlewares, beforeValidation) {\n  const beforeValidationError = new Error('middleware cannot return a promise when applyBeforeValidation is true');\n  return middlewares.reduce((acc, middleware) => {\n    if (middleware.applyBeforeValidation !== beforeValidation) {\n      return acc;\n    }\n    if (isPromise(acc)) {\n      return acc.then(initialObj => Promise.all([initialObj, middleware(initialObj, yargs)])).then(_ref => {\n        let [initialObj, middlewareObj] = _ref;\n        return Object.assign(initialObj, middlewareObj);\n      });\n    } else {\n      const result = middleware(acc, yargs);\n      if (beforeValidation && isPromise(result)) throw beforeValidationError;\n      return isPromise(result) ? result.then(middlewareObj => Object.assign(acc, middlewareObj)) : Object.assign(acc, result);\n    }\n  }, argv);\n}","map":{"version":3,"names":["argsert","isPromise","globalMiddlewareFactory","globalMiddleware","context","callback","applyBeforeValidation","arguments","length","undefined","Array","isArray","i","Error","prototype","push","apply","commandMiddlewareFactory","commandMiddleware","map","middleware","applyMiddleware","argv","yargs","middlewares","beforeValidation","beforeValidationError","reduce","acc","then","initialObj","Promise","all","_ref","middlewareObj","Object","assign","result"],"sources":["/Users/lucasfrotabarroso/Desktop/util/react-algoritmo/node_modules/yargs/build/lib/middleware.js"],"sourcesContent":["import { argsert } from './argsert.js';\nimport { isPromise } from './utils/is-promise.js';\nexport function globalMiddlewareFactory(globalMiddleware, context) {\n    return function (callback, applyBeforeValidation = false) {\n        argsert('<array|function> [boolean]', [callback, applyBeforeValidation], arguments.length);\n        if (Array.isArray(callback)) {\n            for (let i = 0; i < callback.length; i++) {\n                if (typeof callback[i] !== 'function') {\n                    throw Error('middleware must be a function');\n                }\n                callback[i].applyBeforeValidation = applyBeforeValidation;\n            }\n            Array.prototype.push.apply(globalMiddleware, callback);\n        }\n        else if (typeof callback === 'function') {\n            callback.applyBeforeValidation = applyBeforeValidation;\n            globalMiddleware.push(callback);\n        }\n        return context;\n    };\n}\nexport function commandMiddlewareFactory(commandMiddleware) {\n    if (!commandMiddleware)\n        return [];\n    return commandMiddleware.map(middleware => {\n        middleware.applyBeforeValidation = false;\n        return middleware;\n    });\n}\nexport function applyMiddleware(argv, yargs, middlewares, beforeValidation) {\n    const beforeValidationError = new Error('middleware cannot return a promise when applyBeforeValidation is true');\n    return middlewares.reduce((acc, middleware) => {\n        if (middleware.applyBeforeValidation !== beforeValidation) {\n            return acc;\n        }\n        if (isPromise(acc)) {\n            return acc\n                .then(initialObj => Promise.all([\n                initialObj,\n                middleware(initialObj, yargs),\n            ]))\n                .then(([initialObj, middlewareObj]) => Object.assign(initialObj, middlewareObj));\n        }\n        else {\n            const result = middleware(acc, yargs);\n            if (beforeValidation && isPromise(result))\n                throw beforeValidationError;\n            return isPromise(result)\n                ? result.then(middlewareObj => Object.assign(acc, middlewareObj))\n                : Object.assign(acc, result);\n        }\n    }, argv);\n}\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,cAAc;AACtC,SAASC,SAAS,QAAQ,uBAAuB;AACjD,OAAO,SAASC,uBAAuBA,CAACC,gBAAgB,EAAEC,OAAO,EAAE;EAC/D,OAAO,UAAUC,QAAQ,EAAiC;IAAA,IAA/BC,qBAAqB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;IACpDP,OAAO,CAAC,4BAA4B,EAAE,CAACK,QAAQ,EAAEC,qBAAqB,CAAC,EAAEC,SAAS,CAACC,MAAM,CAAC;IAC1F,IAAIE,KAAK,CAACC,OAAO,CAACN,QAAQ,CAAC,EAAE;MACzB,KAAK,IAAIO,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,QAAQ,CAACG,MAAM,EAAEI,CAAC,EAAE,EAAE;QACtC,IAAI,OAAOP,QAAQ,CAACO,CAAC,CAAC,KAAK,UAAU,EAAE;UACnC,MAAMC,KAAK,CAAC,+BAA+B,CAAC;QAChD;QACAR,QAAQ,CAACO,CAAC,CAAC,CAACN,qBAAqB,GAAGA,qBAAqB;MAC7D;MACAI,KAAK,CAACI,SAAS,CAACC,IAAI,CAACC,KAAK,CAACb,gBAAgB,EAAEE,QAAQ,CAAC;IAC1D,CAAC,MACI,IAAI,OAAOA,QAAQ,KAAK,UAAU,EAAE;MACrCA,QAAQ,CAACC,qBAAqB,GAAGA,qBAAqB;MACtDH,gBAAgB,CAACY,IAAI,CAACV,QAAQ,CAAC;IACnC;IACA,OAAOD,OAAO;EAClB,CAAC;AACL;AACA,OAAO,SAASa,wBAAwBA,CAACC,iBAAiB,EAAE;EACxD,IAAI,CAACA,iBAAiB,EAClB,OAAO,EAAE;EACb,OAAOA,iBAAiB,CAACC,GAAG,CAACC,UAAU,IAAI;IACvCA,UAAU,CAACd,qBAAqB,GAAG,KAAK;IACxC,OAAOc,UAAU;EACrB,CAAC,CAAC;AACN;AACA,OAAO,SAASC,eAAeA,CAACC,IAAI,EAAEC,KAAK,EAAEC,WAAW,EAAEC,gBAAgB,EAAE;EACxE,MAAMC,qBAAqB,GAAG,IAAIb,KAAK,CAAC,uEAAuE,CAAC;EAChH,OAAOW,WAAW,CAACG,MAAM,CAAC,CAACC,GAAG,EAAER,UAAU,KAAK;IAC3C,IAAIA,UAAU,CAACd,qBAAqB,KAAKmB,gBAAgB,EAAE;MACvD,OAAOG,GAAG;IACd;IACA,IAAI3B,SAAS,CAAC2B,GAAG,CAAC,EAAE;MAChB,OAAOA,GAAG,CACLC,IAAI,CAACC,UAAU,IAAIC,OAAO,CAACC,GAAG,CAAC,CAChCF,UAAU,EACVV,UAAU,CAACU,UAAU,EAAEP,KAAK,CAAC,CAChC,CAAC,CAAC,CACEM,IAAI,CAACI,IAAA;QAAA,IAAC,CAACH,UAAU,EAAEI,aAAa,CAAC,GAAAD,IAAA;QAAA,OAAKE,MAAM,CAACC,MAAM,CAACN,UAAU,EAAEI,aAAa,CAAC;MAAA,EAAC;IACxF,CAAC,MACI;MACD,MAAMG,MAAM,GAAGjB,UAAU,CAACQ,GAAG,EAAEL,KAAK,CAAC;MACrC,IAAIE,gBAAgB,IAAIxB,SAAS,CAACoC,MAAM,CAAC,EACrC,MAAMX,qBAAqB;MAC/B,OAAOzB,SAAS,CAACoC,MAAM,CAAC,GAClBA,MAAM,CAACR,IAAI,CAACK,aAAa,IAAIC,MAAM,CAACC,MAAM,CAACR,GAAG,EAAEM,aAAa,CAAC,CAAC,GAC/DC,MAAM,CAACC,MAAM,CAACR,GAAG,EAAES,MAAM,CAAC;IACpC;EACJ,CAAC,EAAEf,IAAI,CAAC;AACZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}